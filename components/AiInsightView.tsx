
import React from 'react';
import { HealthInsight, ThemeConfig } from '../types';

interface Props {
  insight: HealthInsight | null;
  isLoading: boolean;
  theme: ThemeConfig;
}

export const AiInsightView: React.FC<Props> = ({ insight, isLoading, theme }) => {
  if (isLoading) {
    return (
      <div className="bg-white p-12 rounded-[2.5rem] shadow-sm border border-slate-100 space-y-10">
        <div className="flex items-center gap-4 animate-pulse">
           <div className="w-14 h-14 bg-slate-100 rounded-2xl"></div>
           <div className="space-y-2">
             <div className="h-4 bg-slate-100 rounded w-48"></div>
             <div className="h-2 bg-slate-50 rounded w-32"></div>
           </div>
        </div>
        <div className="space-y-4">
          <div className="h-4 bg-slate-50 rounded w-full"></div>
          <div className="h-4 bg-slate-50 rounded w-full"></div>
          <div className="h-4 bg-slate-50 rounded w-4/5"></div>
        </div>
      </div>
    );
  }

  if (!insight) return null;

  return (
    <div className="bg-white p-12 rounded-[2.5rem] shadow-2xl shadow-slate-200/50 border border-slate-100 space-y-12 relative overflow-hidden transition-all duration-500">
      <div className={`absolute top-0 right-0 p-10 opacity-[0.02] text-${theme.accent}`}>
        <i className="fa-solid fa-file-medical text-[14rem]"></i>
      </div>

      <div className="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-6">
        <div className="flex items-center gap-5">
          <div className={`w-14 h-14 ${theme.light} rounded-2xl flex items-center justify-center ${theme.text} border ${theme.border} shadow-sm transition-colors duration-500`}>
            <i className="fa-solid fa-brain text-xl"></i>
          </div>
          <div>
            <h3 className="text-2xl font-black text-slate-800 tracking-tight">Intelligence Report</h3>
            <p className="text-[10px] font-bold text-slate-400 uppercase tracking-[0.2em]">Contextual Analysis Engine</p>
          </div>
        </div>
        <div className="text-[10px] font-black text-slate-400 px-4 py-2 border border-slate-100 rounded-xl bg-slate-50 tracking-widest">
          ID: {Math.random().toString(36).substr(2, 6).toUpperCase()}
        </div>
      </div>

      <div className={`p-8 rounded-3xl border ${theme.border} ${theme.light} transition-colors duration-500`}>
        <h4 className={`text-[10px] font-black ${theme.text} uppercase tracking-[0.3em] mb-4`}>Executive Summary</h4>
        <p className="text-slate-700 leading-relaxed font-semibold text-sm">{insight.summary}</p>
      </div>

      <div className="grid md:grid-cols-2 gap-12">
        <div className="space-y-6">
          <h4 className="text-[10px] font-black text-slate-500 uppercase tracking-[0.3em] flex items-center gap-3">
            <span className="w-4 h-px bg-amber-400"></span>
            Key Risk Vectors
          </h4>
          <ul className="space-y-4">
            {insight.riskFactors.map((factor, idx) => (
              <li key={idx} className="group flex items-start gap-4 p-4 bg-white border border-slate-100 rounded-2xl text-slate-600 text-[13px] font-bold shadow-sm hover:border-blue-200 hover:shadow-md transition-all">
                <span className={`w-2 h-2 ${theme.bg} rounded-full mt-1.5 shrink-0 opacity-40 group-hover:opacity-100 transition-opacity`}></span>
                {factor}
              </li>
            ))}
          </ul>
        </div>

        <div className="space-y-6">
          <h4 className="text-[10px] font-black text-slate-500 uppercase tracking-[0.3em] flex items-center gap-3">
            <span className="w-4 h-px bg-emerald-400"></span>
            Clinical Directive
          </h4>
          <ul className="space-y-4">
            {insight.recommendations.map((rec, idx) => (
              <li key={idx} className="group flex items-start gap-4 p-4 bg-white border border-slate-100 rounded-2xl text-slate-600 text-[13px] font-bold shadow-sm hover:border-emerald-200 hover:shadow-md transition-all">
                <span className="w-2 h-2 bg-emerald-500 rounded-full mt-1.5 shrink-0 opacity-40 group-hover:opacity-100 transition-opacity"></span>
                {rec}
              </li>
            ))}
          </ul>
        </div>
      </div>

      <div className="pt-10 border-t border-slate-100">
        <div className="bg-red-50/70 p-6 rounded-2xl border border-red-100 shadow-inner">
          <p className="text-[9px] text-red-500/80 font-black uppercase tracking-[0.1em] text-center leading-relaxed">
            COMPUTATIONAL ADVISORY: THIS OUTPUT IS GENERATED BY PROBABILISTIC MODELS. IT IS INTENDED FOR INFORMATIONAL SCREENING ONLY. FINAL DIAGNOSIS REQUIRES PROFESSIONAL CLINICAL EVALUATION BY A LICENSED PRACTITIONER.
          </p>
        </div>
      </div>
    </div>
  );
};
